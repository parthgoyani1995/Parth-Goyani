{{ 'ecom-hotspot.css' | asset_url | stylesheet_tag }}
<style>
    .ecom-hotspot-container {
        max-width: {{ section.settings.hotspot_container_width }}px;
    }


</style>
<section class="ecom-hotspot-section">
	<div class="ecom-hotspot-container">
		<div class="ecom-hotspot-grid">
			{% for block in section.blocks %}
				<div class="ecom-hotspot-item">
					<img src="{{ block.settings.hotspot_image | image_url: width: 450, height: 450, crop: 'center' }}"
					     class="ecom-hotspot-image" alt="Hotspot image"/>
					<span class="ecom-hotspot-icon icon-desktop mobile-hide"
					      style=" left: {{ block.settings.hotspot_left }}%; top: {{ block.settings.hotspot_top }}%;">
						{% render 'plus-circle-icon' %}
					</span>
					<span class="ecom-hotspot-icon icon-mobile desktop-hide"
					      style="left: {{ block.settings.hotspot_left }}%; top: {{ block.settings.hotspot_top }}%;">
						{% render 'plus-circle-icon' %}
					</span>
					<div class="desktop-small-popup" style="left: calc({{ block.settings.hotspot_left }}% - 170px); top: calc({{ block.settings.hotspot_top }}% + 15px);">
						<div class="desktop-small-popup-content">
							<div class="desktop-small-popup-image">
								<img src="{{ block.settings.hotspot_image | image_url: width: 50, height: 50, crop: 'center' }}"
								     alt="Hotspot image"/>
							</div>
							<div class="desktop-small-popup-text">
								<p class="product-title">{{ block.settings.hotspot_product.title }}</p>
								<p class="product-price">{{ block.settings.hotspot_product.price | money }}</p>
							</div>
						</div>
					</div>
				</div>
			{% endfor %}
		</div>
	</div>
</section>
{{ 'ecom-hotspot.js' | asset_url | stylesheet_tag }}

{% schema %}
{
	"name": "Ecom Hotspot Grid",
	"settings": [
		{
			"type": "range",
			"id": "hotspot_container_width",
			"label": "Container Width",
			"default": 1200,
			"min": 1000,
			"max": 1900,
			"step": 50
		},
		{
			"type": "text",
			"id": "title",
			"label": "Title",
			"default": "Tisso vison in the wild"
		}
	],
	"blocks": [
		{
			"type": "hotspot",
			"name": "Hotspot",
			"limit": 6,
			"settings": [
				{
					"type": "image_picker",
					"id": "hotspot_image",
					"label": "Hotspot Image"
				},
				{
					"type": "product",
					"id": "hotspot_product",
					"label": "Hotspot Product"
				},
				{
					"type": "header",
					"content": "Hotspot placement"
				},
				{
					"type": "range",
					"id": "hotspot_left",
					"label": "Left Position",
					"default": 50,
					"min": 0,
					"max": 100,
					"step": 1,
					"unit": "%"
				},
				{
					"type": "range",
					"id": "hotspot_top",
					"label": "Top Position",
					"default": 50,
					"min": 0,
					"max": 100,
					"step": 1,
					"unit": "%"
				}
			]
		}
	],
	"presets": [
		{
			"name": "Ecom Hotspot Grid",
			"category": "Custom"
		}
	]
}
{% endschema %}
